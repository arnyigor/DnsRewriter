# Local DNS Rewriter for Android

**Local DNS Rewriter** ‚Äî —ç—Ç–æ Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å DNS-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ IP-–∞–¥—Ä–µ—Å–∞. –û–Ω–æ —ç–º—É–ª–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–∞ `hosts` –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö Android –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–ª—É—á–µ–Ω–∏—è root-–¥–æ—Å—Ç—É–ø–∞.

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

*   **–ë–µ–∑ root-–ø—Ä–∞–≤**: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö Android-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.
*   **–õ–æ–∫–∞–ª—å–Ω–æ –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ**: –í—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ DNS –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.
*   **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**: –ò–º–ø–æ—Ä—Ç –ø—Ä–∞–≤–∏–ª –∏–∑ —Ñ–∞–π–ª–æ–≤ `hosts.txt`.
*   **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Wildcard**: –ü—Ä–∞–≤–∏–ª–∞ –≤–∏–¥–∞ `*.example.com` –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º –ø–æ–¥–¥–æ–º–µ–Ω–∞–º.
*   **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫**: –ù–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ Kotlin —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Jetpack Compose, Koin, Room –∏ Clean Architecture.

## ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `VpnService` –∏–∑ Android SDK –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –≤—Å–µ–≥–æ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞.
1.  DNS-–∑–∞–ø—Ä–æ—Å—ã (UDP, –ø–æ—Ä—Ç 53) –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è.
2.  –ï—Å–ª–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –¥–æ–º–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∞–≤–∏–ª—É –∏–∑ –≤–∞—à–µ–≥–æ —Å–ø–∏—Å–∫–∞ (–≤–∫–ª—é—á–∞—è wildcard), –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–æ–¥–¥–µ–ª—å–Ω—ã–π DNS-–æ—Ç–≤–µ—Ç —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤–∞–º–∏ IP.
3.  –ß—Ç–æ–±—ã –ø–æ–≤—ã—Å–∏—Ç—å —à–∞–Ω—Å—ã –Ω–∞ —É—Å–ø–µ—Ö, –∑–∞–ø—Ä–æ—Å—ã "–Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö" —Ç–∏–ø–æ–≤ (AAAA, HTTPS) –¥–ª—è —Ü–µ–ª–µ–≤—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è.
4.  –í–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π —Ç—Ä–∞—Ñ–∏–∫ (–≤–∫–ª—é—á–∞—è TCP/UDP –∫ –ø–æ–¥–º–µ–Ω–µ–Ω–Ω—ã–º IP) –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ VPN-—Ç—É–Ω–Ω–µ–ª—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–π –≤–µ—Ä–¥–∏–∫—Ç –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

–í —Ö–æ–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç—â–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±—ã–ª —Å–¥–µ–ª–∞–Ω –æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã–π –≤—ã–≤–æ–¥: **–º–µ—Ç–æ–¥ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–æ–¥–º–µ–Ω—ã DNS –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö (HTTPS) –≤–µ–±-—Å–µ—Ä–≤–∏—Å–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, ChatGPT, Gemini, 4PDA –∏ –¥—Ä.).

**–ü—Ä–∏—á–∏–Ω–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ SNI (Server Name Indication) –∏ –≥–µ–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ IP.**

–î–∞–∂–µ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –ø–æ–¥–º–µ–Ω–µ IP-–∞–¥—Ä–µ—Å–∞, –Ω–∞ —ç—Ç–∞–ø–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ TLS-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å–æ–æ–±—â–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä—É –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è –¥–æ–º–µ–Ω–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ–Ω–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è. –°–µ—Ä–≤–µ—Ä-–ø–æ–ª—É—á–∞—Ç–µ–ª—å (–∏–ª–∏ –µ–≥–æ CDN, –Ω–∞–ø—Ä–∏–º–µ—Ä, Cloudflare) –≤–∏–¥–∏—Ç —ç—Ç–æ –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å–≤–æ–∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
*   –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç SNI —Å —Ç–µ–º, —á—Ç–æ –æ–Ω –æ–∂–∏–¥–∞–µ—Ç.
*   –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π IP-–∞–¥—Ä–µ—Å –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –≥–µ–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ TLS, –∏ –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å—É –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

**–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –¥–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
*   **–≠–§–§–ï–ö–¢–ò–í–ù–û** –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–µ–∫–ª–∞–º—ã/—Ç—Ä–µ–∫–µ—Ä–æ–≤ (–ø—É—Ç–µ–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Ö –¥–æ–º–µ–Ω–æ–≤ –Ω–∞ `0.0.0.0`) –∏–ª–∏ –¥–ª—è –∑–∞–¥–∞—á –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏.
*   **–ù–ï–≠–§–§–ï–ö–¢–ò–í–ù–û** –¥–ª—è –æ–±—Ö–æ–¥–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ —É—Ä–æ–≤–Ω–µ CDN –∏–ª–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞.

## üöÄ –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à–µ–Ω –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –û–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é –∫–∞–∫ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–π DNS-—Ä–µ–¥–∞–∫—Ç–æ—Ä. –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –º–æ–∂–µ—Ç —Å–ª—É–∂–∏—Ç—å —Ö–æ—Ä–æ—à–∏–º –ø—Ä–∏–º–µ—Ä–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `VpnService` –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å—Ç–µ–∫–µ Android.

–î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –¥–ª—è –æ–±—Ö–æ–¥–∞ —Å–ª–æ–∂–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å **–≤–Ω–µ—à–Ω–∏–º –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–æ–º**, —á—Ç–æ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ —Ä–∞–º–∫–∏ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–π —Ü–µ–ª–∏ —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.